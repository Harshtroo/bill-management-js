<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
    <title>Bill Management System</title>
</head>

<body>
    <div class="row" style="width:100%;">

        <div class="col-6" style="float: left;background-color:powderblue;padding-left: 5%;">
            <h2 align="center">Menu</h2>
            <form name="food">
                <label>Enter your name: <input type="text" name="fname"></label>
            </form>
            <h3> Pizaa</h3>
            <div id="pizza">
            </div>
            <br>
            <input type="checkbox" id="status">
            <label for="amount"> Payment status</label><br><br>
            <button type="submit" onclick="showmenu()"> submit </button>
            <!-- <input type="button" value="clear"> -->
            <!-- <button type="reset" value="clear">clear</button> -->
            <button type="reset" value="Reset">Reset</button>
        </div>

        <div class="col-6" style="float: left;background-color:#aaaaaa;padding-left: 5%;">
            <h2 align="center">Your Bill </h2>
            <label>Customer Name: <input type="text" id="customer_name"></label><br><br>
            <label>Order Id: <input type="number" id="orderno" value=""></label><br><br>

            <table style="width:100% ;" border="1px solid black" id="billMenu">
            </table>
            <p id="total"></p>
            <p id="payment_status"></p>
        </div>
    </div>

    <script>
        let foods = [{
            pizza: [
                {
                    pname: "MARGHERITA",
                    price: 200,
                    quantity: 0
                },
                {
                    pname: "DOUBLE CHEESE MARGHERITA",
                    price: 250,
                    quantity: 0
                },
                {
                    pname: "PEPPY PANEER",
                    price: 300,
                    quantity: 0
                },
            ]
        }]

        let show_pizza = ""
        for (i = 0; i < foods.length; i++) {
            for (j = 0; j < foods[i].pizza.length; j++) {
                show_pizza += `<p>${foods[i].pizza[j].pname} ${foods[i].pizza[j].price}</p>
                <input type="number" min ="1" max="10" name="fname" id="pizzaname${j}">`
            }
        }

        $("#pizza").html(show_pizza);
        function showmenu() {

            for (i = 0; i < foods.length; i++) {
                for (j = 0; j < foods[i].pizza.length; j++) {
                    foods[i].pizza[j].quantity = document.getElementById(`pizzaname${j}`).value
                }
            }
            const piname = new Set()
            generatebill()
        }

        function generatebill() {
            output = " "
            outputData = "<tr><th>Items</th><th>Quantity</th><th>Price</th></tr>"
            document.getElementById("customer_name").value = document.forms["food"]["fname"].value
            document.getElementById("orderno").value = new Date().getTime().toString()

            // select pizza show
            for (i = 0; i < foods.length; i++) {
                for (j = 0; j < foods[i].pizza.length; j++) {
                    if (foods[i].pizza[j].quantity != 0) {
                        output += `<tr><td>${foods[i].pizza[j].pname}</td><td>${foods[i].pizza[j].quantity}</td><td>${foods[i].pizza[j].price}</td></tr>`
                    }
                }
            }
            var finalData = outputData + output
            $("#billMenu").html(finalData);


            // total amount show
            let total = 0;
            for (i = 0; i < foods.length; i++) {
                for (j = 0; j < foods[i].pizza.length; j++) {
                    total = total + (foods[i].pizza[j].price * foods[i].pizza[j].quantity);
                }
            }

            document.getElementById("total").innerHTML = "total bill : " + total

            let payment_message = ""
            const payment_status = document.getElementById("status").checked
            document.getElementById("payment_status").innerHTML = payment_status

            if (payment_status == true) {
                payment_message = "Successfully"
            } else {
                payment_message = "Payment Failed"
            }
            document.getElementById("payment_status").innerHTML = payment_message

            console.log(payment_status)

        }
    </script>
</body>

</html>